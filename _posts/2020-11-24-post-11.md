---
layout: post
title: '같은 제품 = 같은가격?(3)'
description: '# 보자보자_넌_다음에_보자'
date: 2020-11-24 17:43:37 +0900
categories: Python Data-Crawling
---
## 오늘의 목표
[오늘의집][today's_home] 사이트에서 가구 자료(가구 이름 및 가격 등) 긁어오기

### Python으로 데이터를 긁어와보자!
💡 `bs4`(BeautifulSoup)와 `requests` 라이브러리를 사용했습니다.

- `requests` : html문서를 긁어오기 위해 사용
- `bs4` : 긁어온 문서의 각 요소들에 접근할 때 사용 

만약 위 라이브러리가 깔려있지 않으시다면 다음과 같이 설치해주시면 됩니다.

```bash
pip install bs4
pip install requests
```

설치가 되었다면 다음 코드를 실행합니다.

```python
import requests 
from bs4 import BeautifulSoup as bs # 너무 길어서 bs로 줄였습니다.

## 오늘의 집 사이트에서 데이터 긁어오기 ##

query = "벽트리" # 검색어입니다. 곧 크리스마스이기도 하고 해서 벽트리를 골랐습니다.
URL = "https://ohou.se/productions/feed?query=" + query # Get메소드를 사용하므로 ?뒤에 쿼리문을 작성해줍니다.
res = requests.get(URL).text # 만든 URL의 html 내용을 긁어왔습니다.
soup = bs(res, 'html.parser') # BeautifulSoup 라이브러리를 사용하여 요소에 접근 가능한 변수를 하나 만들었습니다.


## 긁어온 html 요소에 접근하기 ##

# 로드된 페이지의 검색결과들을 저장합니다.
trees = soup.find_all(class_="production-item") # class 특성 값이 "production-item"인 태그들을 전부 찾습니다.

result = [] # 결과를 저장할 리스트를 하나 만들었습니다.
for tree in trees: # 검색결과물 중 하나씩 접근하는 방식으로, 모든 결과물에 접근합니다.
    title = tree.find(class_ = "production-item__header__name").get_text() # 제품명이 들어있는 태그를 찾습니다.
    price = tree.find(class_="production-item-price__price") # 제품 가격이 들어있는 태그를 찾습니다.
    if price is not None: # 페이지가 덜 로드되거나 한다면 의미없는 데이터를 가져올 수 있습니다.
        price = price.get_text() # 태그 속 텍스트를 저장합니다.
    result.append([title, price])


## 결과물 ##

# result
[['북유럽풍 크리스마스 국민벽트리 풀세트 5style', '19,900'],
 ['[오늘의딜] 크리스마스 트리/ 미니트리/벽트리 풀세트 18종', '29,500 외'], # 여러 가구를 묶어 정렬해두었기 때문에 '외'가 붙습니다.
 ['국민 벽트리 5종', '8,500 외'],
 ['[오늘의딜] 디오 크리스마스트리 풀세트/벽트리 10종', '25,900 외'],
 ['크리스마스트리 하프 벽트리 풀세트 60cm 3colors', '17,900'],
 ['크리스마스 국민 벽트리/ 미니트리/ 중대형트리 8종', '12,500 외'],
 ['BEST 크리스마스 벽트리/ 중대형 트리 23종', '17,900 외'],
 ['크리스마스 코튼볼 벽트리 만들기 패키지 4종', '23,800'],
 ['전구 벽트리 만들기 패키지 2종', '23,800 외'],
 ['크리스마스 벽트리 2종', '18,900 외'],
 ['크리스마스 벽트리 14종', '13,500 외'],
 ['1.4m 조이레드 크리스마스 트리 장식 전구 풀세트 벽트리증정', '40,900'],
 ['마크라메 벽트리 2종', '21,900 외'],
 ['크리스마스 벽트리 8종', '5,200 외'],
 ['우드프레임 크리스마스 벽트리', '18,900'],
 ['\ufeff크리스마스트리 \ufeff우드 스탠드 겸용 벽트리-3000번 + 예쁜 가렌더 증정', '19,500'],
 ['크리스마스 벽트리/미니트리/중대형트리', '17,900 외'],
 ['목화와 아가양 우드 벽트리 전구set', '37,900'],
 ['크리스마스 벽트리 풀세트 엔틱브라운 M 전구포함', '23,900'],
 ['크리스마스트리 하프벽트리 대 80cm', '29,900'],
 ['', None], # 의미없는 데이터입니다.
 ['', None], # 아마 사이트에서 불러오지 않은 가구 데이터로 보입니다.
 ['', None], # 스크롤을 하면 그 때 불러오는 친구들 말이죠.
 ['', None],
 ['', None]]

```

### 문제점
1. 페이지가 전부 로드 되지 않아 의미없는 데이터가 넘어오기도 한다.(이건 해결할 방법이 보인다.)
2. ❗ 타 사이트와 제품명이 달라 제품명으로 타 사이트 가구와 비교하는 것에 문제가 생겼다.
    - 모델명도 찾아봤지만, 있는 제품이 있는가 하면 없는 제품이 더 많다.

---

## 결과

데이터 긁어오기는 성공적으로 끝마쳤지만, 각 쇼핑몰 별 가구 가격 비교 프로젝트는 여기서 막혀버렸습니다.

가벼운 프로젝트부터 차근차근하려고 했던 것이 첫 프로젝트부터 엄청 커진 느낌이 있네요. [3번째 포스팅][third-post]부터 이 프로젝트를 위해 빌드업한 포스팅이 벌써 7개가 되어갑니다.

처음 포스팅을 시작할 때 '작은 것부터 차근차근 즐기면서 하자'라는 마음가짐을 가졌었습니다. 그런데 어느 순간부터 이 프로젝트에 목줄이 메여 있었네요. 

다시 초심으로 돌아가 작은 것들부터 조금씩 진행해보려 합니다.

해서, 이 프로젝트는 여기서 잠시 멈추지만 가능하다면 실력을 더 쌓은 후에 다시 도전하고 싶네요. (2020-11-24)



[today's_home]: http://www.ohou.se/
[third-post]: /posts/post-3