I"´<p>ìµœê·¼ì— TRPGë¥¼ ì•Œê²Œë˜ì–´ ì´ê²ƒì €ê²ƒ ì°¾ì•„ë³´ë˜ ì¤‘ í¥ë¯¸ê°€ ì¼ì–´ ê°„ë‹¨íˆ ë§Œë“¤ì–´ ë³¸ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.</p>

<h2 id="ê¸°ëŠ¥">ê¸°ëŠ¥</h2>

<html lang="kr">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
    <title>ì„¤ì •ë†€ì´</title>
    <style>
        .btn{
            width: 150px;

        }
        .box{
            border: 1px solid #2e2e2e;
        }
    </style>
</head>
<body>
    <input class="btn" type="button" onclick="addS()" value="ì„¤ì •ì¶”ê°€" />
    <!-- <input class="btn" type='button' onclick="extractS()" value="ì„¤ì •ì¶”ì¶œ">-->
    <br /><br />
    ì„¤ì • ì €ì¥í•˜ê¸° : <input class="btn" id="btn_save" type="button" onclick="saveS()" data-clipboard-target="#save_data" value="ì €ì¥" />
    <input type="text" name="save_data" id="save_data" readonly="" /><br />
    ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° : <input class="btn" id="btn_load" type="button" onclick="loadS()" value="ë°ì´í„°ì…ë ¥" />
    <hr />
    <div class="box" id="box_btn_settings">
        <input type="button" onclick="addLine()" value="ì¤„ ì¶”ê°€" />
    </div>
    <hr />
    <div class="box" id="box_output_settings">

    </div>
</body>
<script>
    new ClipboardJS('#btn_save')

    const div_box_btn_settings = document.getElementById('box_btn_settings')
    const div_box_output_settings = document.getElementById('box_output_settings')

    let categories = []
    
    class Category{
        constructor(category){
            this.category = category
            this.settings = []
            this.isUsed = []
            this.cntUsed = 0
            this.isEmpty = true
        }
        add(setting){
            this.settings.push(setting)
            this.isUsed.push(0)
            this.isEmpty = false
        }
        pop(idx){
            if(this.isUsed[idx]) return false

            this.isUsed[idx] = 1
            if(++this.cntUsed === this.settings.length){
                this.isEmpty = true
            }
            return this.settings[idx]
        }
        reset(){
            this.isUsed = new Array(this.settings.length).fill(0)
            this.cntUsed = 0
            this.isEmpty = this.settings.length === 0 ? true : false
        }
    }
    class Setting{
        constructor(content){
            this.content = content
        }
    }
    const addS = ()=>{
        let text_category = prompt('ì¶”ê°€í•  ì†ì„±ì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”.')
        let text_content = prompt('ì¶”ê°€í•  ì†ì„±ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.')

        for(let tmp_category of categories){
            if(tmp_category.category == text_category){
                let setting = new Setting(text_content)
                tmp_category.add(setting)
                return true
            }
        }

        let category = new Category(text_category)
        let setting = new Setting(text_content)
        category.add(setting)
        categories.push(category)

        let btn_category = document.createElement('input')
        btn_category.value = text_category
        btn_category.type = 'button'
        btn_category.onclick = function() {extractS(category)}

        div_box_btn_settings.appendChild(btn_category)

        return true
    }
    const extractS = (category)=>{
        let settings = category.settings

        if(category.isEmpty) return false

        let rand_num = parseInt(Math.random()*settings.length)
        while(category.isUsed[rand_num]){
            rand_num = parseInt(Math.random()*settings.length)
        }
        
        let p_setting = document.createElement('p')
        p_setting.innerText = category.pop(rand_num).content

        div_box_output_settings.appendChild(p_setting)

    }
    const addLine = ()=>{
        div_box_output_settings.appendChild(document.createElement('hr'))
        categories.map(category => category.reset())
    }
    const saveS = ()=>{
        categories.map(category => category.reset())
        save_data.value = JSON.stringify(categories)
        // alert('ë¯¸êµ¬í˜„')
    }
    const loadS = ()=>{
        let data = prompt('ì„¸ì´ë¸Œ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì„¸ìš”.')
        categories = JSON.parse(data)

        for(let category of categories){
            category.__proto__ = Category.prototype

            let btn_category = document.createElement('input')
            btn_category.value = category.category
            btn_category.type = 'button'
            btn_category.onclick = function() {extractS(category)}

            div_box_btn_settings.appendChild(btn_category)
        }
        // alert('ë¯¸êµ¬í˜„')
    }
</script>
</html>
:ET