I"„d<h2 id="info">Info</h2>
<h3 id="summary">Summary</h3>
<p>ìœˆë„ìš°ì˜ í…ìŠ¤íŠ¸ ë·°ì–´ í”„ë¡œê·¸ë¨ì´ ë„ˆë¬´ ì ì–´ ì§ì ‘ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤. ì›¹ í˜ì´ì§€ë¡œ ë™ì‘í•˜ì—¬ê¸ˆ í•˜ì—¬ ì ‘ê·¼ì„±ì„ ë†’ì—¬ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<h3 id="platform">Platform</h3>
<p>HTML, Node.js</p>

<h3 id="functions">Functions</h3>
<ul>
  <li>í•„ìˆ˜ê¸°ëŠ¥:
    <ol>
      <li>âœ… í…ìŠ¤íŠ¸ ì½ì–´ì˜¤ê¸°</li>
      <li>âœ… íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°</li>
      <li>âœ… ì±…ê°ˆí”¼ ê¸°ëŠ¥</li>
    </ol>
  </li>
  <li>ì¶”ê°€ê¸°ëŠ¥:
    <ol>
      <li>âŒ ì €ì¥ì†Œë¥¼ ë¶„í• í•˜ì—¬ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ì‚¬ìš©í• ìˆ˜ ìˆê²Œë”í•˜ê¸°</li>
      <li>âŒ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°</li>
    </ol>
  </li>
  <li>ë§Œì¡±ê¸°ëŠ¥:
    <ol>
      <li>âŒ ë‹¤ì–‘í•œ ê¸€ê¼´ ë° í¬ê¸° ì œê³µí•˜ê¸°</li>
      <li>âŒ ìê°„, ì¤„ê¸´ê²© ì¡°ì ˆí•˜ê¸°</li>
      <li>âŒ ë°°ê²½ìƒ‰ ë³€í™” ì£¼ê¸°, ë¸”ë£¨ë¼ì´íŒ… ì¤„ì—¬ë³´ê¸°</li>
      <li>âŒ ëˆˆ ê¹œë¹¡ì„ ë©”ì‹œì§€ ë„ìš°ê¸°</li>
    </ol>
  </li>
</ul>

<h2 id="output">Output</h2>
<p><img src="/assets/imgs/post_23/output.mp4" alt="output" title="output" /></p>

<h2 id="contents">Contents</h2>
<h3 id="ì„œë²„-êµ¬ì¶•">ì„œë²„ êµ¬ì¶•</h3>
<p>ê°€ì¥ ì²˜ìŒ ì´ í”„ë¡œì íŠ¸ë¥¼ ê¸°íší–ˆì„ ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">&lt;input type='file'&gt;</code> íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“œë ¤ í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë³´ì•ˆìƒì˜ ë¬¸ì œë¡œ Explorerë¥¼ ì œì™¸í•œ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¹¨ë‹«ê³  ë‹¤ë¥¸ ë°©ë²•ì„ ìƒê°í•˜ë˜ ì¤‘ ì„œë²„ë¥¼ ì‚¬ìš©í•´ë³´ë©´ ì–´ë–¨ê¹Œí•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. í•˜ì—¬ ì„œë²„ì— íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë¶ˆëŸ¬ì˜¤ëŠ” ë°©í–¥ìœ¼ë¡œ ê°œë°œì„ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<p>ì„œë²„ëŠ” Node.jsë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì¶•í•˜ì˜€ê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” Vue ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>

<p>ì¶”ê°€ë¡œ, íŒŒì¼ì„ ì½ì–´ì˜¤ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">fs</code> ëª¨ë“ˆì„, ë¼ìš°íŒ…ì„ ì§ê´€ì ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">express</code> ëª¨ë“ˆì„, íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ”ë° ì‚¬ìš©í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">multer</code> ëª¨ë“ˆì„ ì„¤ì¹˜ ë° ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p>â— requestì˜ body contentsë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ì„  body-parser ëª¨ë“ˆì„ ì‚¬ìš©í–ˆì—ˆì§€ë§Œ, express ëª¨ë“ˆì´ í•´ë‹¹ ê¸°ëŠ¥ì„ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// before</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span><span class="na">extended</span><span class="p">:</span> <span class="kc">false</span><span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="c1">// after</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span><span class="na">extended</span><span class="p">:</span> <span class="kc">false</span><span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</code></pre></div></div>

<p>ë‹¤ìŒì€ ì„œë²„ê°€ í•˜ëŠ” ì¼ì„ ì½”ë“œì™€ í•¨ê»˜ ê°„ëµí•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">GET</code>: <code class="language-plaintext highlighter-rouge">/</code> : Main í˜ì´ì§€ë¥¼ ë„ì›ë‹ˆë‹¤.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="dl">'</span><span class="s1">./pages/index.html</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">text/html</span><span class="dl">'</span><span class="p">})</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">GET</code>: <code class="language-plaintext highlighter-rouge">/files</code> : ì €ì¥ì†Œì— ì €ì¥ë˜ì–´ ìˆëŠ” íŒŒì¼ë“¤ì˜ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/files</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readdirSync</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/storage</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">)</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">GET</code>: <code class="language-plaintext highlighter-rouge">/files/:file</code> : <code class="language-plaintext highlighter-rouge">:file</code>ì— ë“¤ì–´ê°„ â€œíŒŒì¼ì´ë¦„â€ìœ¼ë¡œ ì €ì¥ì†Œì—ì„œ íƒìƒ‰í•˜ì—¬ í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë•Œ, ì–´ë””ê¹Œì§€ ì½ì—ˆëŠ”ì§€ì™€ ë¶ë§ˆí¬ì˜ ìœ ë¬´ì— ëŒ€í•œ ì •ë³´ë¥¼ í•¨ê»˜ ë°˜í™˜í•©ë‹ˆë‹¤.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/files/:file</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">file</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`./cache/datastore.json`</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">datastore</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        
        <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`./storage/</span><span class="p">${</span><span class="nx">file</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">datastore</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span> 
            <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">scrollTop</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">bookmarkId</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">};</span>
            <span class="nx">res</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/json</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
                <span class="na">scrollTop</span><span class="p">:</span> <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">].</span><span class="nx">scrollTop</span><span class="p">,</span>
                <span class="na">bookmarkId</span><span class="p">:</span> <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">].</span><span class="nx">bookmarkId</span>
            <span class="p">})</span>
        <span class="p">})</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">POST</code>: <code class="language-plaintext highlighter-rouge">/uploadbookmark</code> : í˜„ì¬ <code class="language-plaintext highlighter-rouge">:file</code>ì˜ bookmarkë¥¼ ì‚¬ìš©ì Cacheì— ì €ì¥í•©ë‹ˆë‹¤.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/uploadbookmark</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">{</span><span class="nx">title</span><span class="p">,</span> <span class="nx">scrollTop</span><span class="p">,</span> <span class="nx">bookmarkId</span><span class="p">}</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="dl">'</span><span class="s1">./cache/datastore.json</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">datastore</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">datastore</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="nx">title</span><span class="p">))</span> 
            <span class="nx">datastore</span><span class="p">[</span><span class="nx">title</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">scrollTop</span><span class="p">:</span> <span class="nx">scrollTop</span><span class="p">,</span>
                <span class="na">bookmarkId</span><span class="p">:</span> <span class="nx">bookmarkId</span>
            <span class="p">};</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="nx">datastore</span><span class="p">[</span><span class="nx">title</span><span class="p">].</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">scrollTop</span>
            <span class="nx">datastore</span><span class="p">[</span><span class="nx">title</span><span class="p">].</span><span class="nx">bookmarkId</span> <span class="o">=</span> <span class="nx">bookmarkId</span>
        <span class="p">}</span>
        <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">./cache/datastore.json</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">datastore</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">);</span>
        <span class="c1">// res.set('Content-Type', 'text/json');</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
    <span class="p">})</span>
<span class="p">})</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">POST</code>: <code class="language-plaintext highlighter-rouge">/uploadfile</code> : ì €ì¥ì†Œì— ìƒˆë¡œìš´ íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/uploadfile</span><span class="dl">'</span><span class="p">,</span> <span class="nx">upload</span><span class="p">.</span><span class="nx">single</span><span class="p">(</span><span class="dl">'</span><span class="s1">file</span><span class="dl">'</span><span class="p">),</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">file</span><span class="p">)</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">204</span><span class="p">).</span><span class="nx">redirect</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="í…ìŠ¤íŠ¸-ì½ì–´ì˜¤ê¸°">í…ìŠ¤íŠ¸ ì½ì–´ì˜¤ê¸°</h3>
<p>ì•ì„œ ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ â€˜í…ìŠ¤íŠ¸ ì½ì–´ì˜¤ê¸°â€™ ê¸°ëŠ¥ì€ <code class="language-plaintext highlighter-rouge">GET: /files/:file</code>ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤.</p>

<p>ì½ì–´ì˜¬ íŒŒì¼ëª…ì€ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ <code class="language-plaintext highlighter-rouge">:file</code>ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.</p>

<p>ë³¸ê²©ì ì¸ í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ì½ê¸° ì „ì— ì‚¬ìš©ì Cacheë¥¼ ë¶ˆëŸ¬ì™€ ì´ì „ì— ì‚¬ìš©ìê°€ í•´ë‹¹ íŒŒì¼ì„ ì½ì€ ì ì´ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.</p>

<p>ì‚¬ìš©ìì˜ ì—´ëŒ ìœ ë¬´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ê³¼ ë¶ë§ˆí¬ ìœ ë¬´, ê·¸ë¦¬ê³  ì–´ë””ê¹Œì§€ ì½ì—ˆëŠ”ì§€ë¥¼ í•¨ê»˜ ë°˜í™˜í•©ë‹ˆë‹¤.</p>

<p>ë°˜í™˜ëœ ì •ë³´ëŠ” ì´í›„ htmlì— ëª…ì‹œëœ javascriptì™€ vueë¥¼ í†µí•´ í™”ë©´ì— í‘œì‹œë©ë‹ˆë‹¤.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Server</span>
<span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/files/:file</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">file</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`./cache/datastore.json`</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">datastore</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        
        <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s2">`./storage/</span><span class="p">${</span><span class="nx">file</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">datastore</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="nx">file</span><span class="p">))</span> 
            <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">scrollTop</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="na">bookmarkId</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">};</span>
            <span class="nx">res</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/json</span><span class="dl">'</span><span class="p">);</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
                <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
                <span class="na">scrollTop</span><span class="p">:</span> <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">].</span><span class="nx">scrollTop</span><span class="p">,</span>
                <span class="na">bookmarkId</span><span class="p">:</span> <span class="nx">datastore</span><span class="p">[</span><span class="nx">file</span><span class="p">].</span><span class="nx">bookmarkId</span>
            <span class="p">})</span>
        <span class="p">})</span>
    <span class="p">})</span>
<span class="p">})</span>
<span class="c1">// Client</span>

<span class="p">...</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s2">`http://localhost:3000/files/</span><span class="p">${</span><span class="nx">t</span><span class="p">.</span><span class="nx">innerText</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span> <span class="c1">// clickí•œ íŒŒì¼ëª…ìœ¼ë¡œ ì„œë²„ì— ìš”ì²­ì„ ë³´ëƒ„</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>                        <span class="c1">// json ë°ì´í„° íŒŒì‹±</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">app</span><span class="p">.</span><span class="nx">bookmarkId</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">bookmarkId</span><span class="p">;</span>            <span class="c1">// Vue ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ data ê°’ ë³€ê²½</span>
        <span class="nx">app</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>              <span class="c1">// Vue ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ data ê°’ ë³€ê²½</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>                <span class="c1">// ì½ì€ í…ìŠ¤íŠ¸ íŒŒì¼ì„ ì¤„ë§ˆë‹¤ ì˜ë¼ì„œ ì €ì¥ =&gt; Array()</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">app</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">res</span><span class="p">)</span>                    <span class="c1">// ë°°ì—´í˜•ì‹ì˜ ë°ì´í„°ë¥¼ Vue dataì— ì €ì¥ =&gt; v-forë¥¼ ì‚¬ìš©í•´ í™”ë©´ì— í‘œì‹œë¨</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">bookmarkId</span><span class="p">)</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">bookmarkId</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">#ffc4bb</span><span class="dl">'</span><span class="p">;</span>   <span class="c1">// ë¶ë§ˆí¬ í‘œì‹œ</span>
        <span class="nx">textplace</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>                                                            <span class="c1">// ì´ì „ì— ì½ì€ ê³³ê¹Œì§€ ì´ë™</span>
    <span class="p">})</span>
</code></pre></div></div>

<h3 id="íŒŒì¼-ì—…ë¡œë“œí•˜ê¸°">íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°</h3>

:ET